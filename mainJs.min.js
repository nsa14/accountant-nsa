function calculateSettingAsThemeString({localStorageTheme:t,systemSettingDark:e}){return null!==t?t:e.matches?"dark":"light"}function updateButton({buttonEl:t,isDark:e}){const n=e?"Change to light theme":"Change to dark theme";t.setAttribute("aria-label",n),t.innerText=n}function updateThemeOnHtmlEl({theme:t}){document.querySelector("html").setAttribute("data-theme",t)}const button=document.querySelector("[data-theme-toggle]"),localStorageTheme=localStorage.getItem("theme"),systemSettingDark=window.matchMedia("(prefers-color-scheme: dark)");let currentThemeSetting=calculateSettingAsThemeString({localStorageTheme:localStorageTheme,systemSettingDark:systemSettingDark});function getOS(){window.matchMedia("(display-mode: standalone)").matches?console.log("This is running as standalone."):$(".popover-install-pwa").css("display","flex").fadeIn()}function doMagic(){function t(t){"granted"===Notification.permission&&async function(t){const e=await navigator.serviceWorker.getRegistration();"showNotification"in e?await e.showNotification("پیغام جدید",{body:t}):new Notification("پیغام جدید",{body:t}),localStorage.removeItem("nsa_notification")}(t)}!function(){if(null!==localStorage.getItem("nsa_register")){let t=JSON.parse(localStorage.getItem("nsa_register"));$("#showusername").html(t.username)}"enabled"===(localStorage.getItem("nsa_notification_status")||"")?$("#send").css("display","none"):$("#send").css("display","block")}();var e=function(){if(!localStorage.hasOwnProperty("nsa_notification"))return!1;if(localStorage.getItem("nsa_notification").length<=0)return!1;t(localStorage.getItem("nsa_notification"))};setInterval(e,1e4),e()}updateButton({buttonEl:button,isDark:"dark"===currentThemeSetting}),updateThemeOnHtmlEl({theme:currentThemeSetting}),button.addEventListener("click",(t=>{const e="dark"===currentThemeSetting?"light":"dark";localStorage.setItem("theme",e),updateButton({buttonEl:button,isDark:"dark"===e}),updateThemeOnHtmlEl({theme:e}),currentThemeSetting=e})),localStorage.setItem("clickCounter","0"),async function(t,e,n){"use strict";let a=e.Site;n(t).ready((function(t){a.run(),getOS();let e=(new Date).toLocaleDateString("fa-IR");t("#dateTime").html("امروز : "+e);let n=t(".page").height();t(".panel").css("min-height",n);let o=t.components.getDefaults("dataTable");t("#exampleTableAdd").DataTable(o)})),t.querySelector(".first-button").addEventListener("click",(function(){t.querySelector(".animated-icon1").classList.toggle("open")})),n(t).on("click",".btn_restore_backup",(function(){n("#imgupload").trigger("click"),t.getElementById("imgupload").addEventListener("change",r)})),n(t).on("click","#send",(function(){o()}));const o=async()=>{e.Notification&&await Notification.requestPermission((t=>{var e;"granted"===t&&(e="نوتیفیکیشن با موفقیت فعال شد ","showNotification"in i?setTimeout((function(){i.showNotification(e)}),1e3):setTimeout((function(){new Notification(e)}),5e3),localStorage.setItem("nsa_notification_status","enabled"),n("#send").css("display","none").slideUp("slow"))}))},i=await navigator.serviceWorker.getRegistration();function l(t,e,n=!0){swal({title:t,text:"",html:!0,type:e}),n&&setTimeout((function(){location.reload()}),1200)}function r(t){var e=new FileReader;e.onload=c,e.readAsText(t.target.files[0])}function c(t){n("#imgupload").val()?function(t){let e=JSON.parse(t);n.each(e,(function(t){n.each(e[t],(function(t,e){localStorage.setItem(e.KeyName,e.KeyValue)}))})),l("اطلاعات با موفقیت بازیابی شد","success")}(t.target.result):l("فایلی انتخاب نشده است","success")}n(t).on("click","#btn_save_notif",(function(){var t=n("#txt_notif").val();localStorage.setItem("nsa_notification",t),l("به درستی ثبت شد","success")})),n(t).on("click",".btn_backup",(function(){let a=[];for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t),n=localStorage.getItem(e);a.push({KeyName:e,KeyValue:n})}console.log(a),function(...a){var o=JSON.stringify(a);o=[o];var i=new Blob(o,{type:"text/plain;charset=utf-8"});if(t.documentMode)e.navigator.msSaveBlob(i,"Customers.txt");else{var l=(e.URL||e.webkitURL).createObjectURL(i),r=n("<a />"),c=new Date;let t=c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear();r.attr("download","nsa-"+t+".json"),r.attr("href",l),n("body").append(r),r[0].click(),n("body").remove(r)}}(a)})),n(t).on("click","#btn_save11111",(function(){})),n(t).on("click",".btn_delete_data",(function(){if(!confirm("آیا از خارج شدن اکانت خود اطمینان دارید?"))return!1;localStorage.clear(),location.reload()})),n(t).on("click","#tap10Bar",(function(){null===localStorage.getItem("clickCounter")&&localStorage.setItem("clickCounter","0");var t=parseInt(localStorage.getItem("clickCounter"))+1;t>10&&n("#exampleNiftyNotification").modal({show:"true"}),localStorage.setItem("clickCounter",t)})),n(".observer-example").persianDatepicker({observer:!0,format:"YYYY/MM/DD",altField:".observer-example-alt",autoClose:!0}),n("#txt_money").keyup((function(t){t.which>=37&&t.which<=40||n(this).val((function(t,e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}))}))}(document,window,jQuery),function(){var t=$("#exampleFootableFiltering");t.footable().on("footable_filtering",(function(t){var e=$("#filteringStatus").find(":selected").val();t.filter+=t.filter&&t.filter.length>0?" "+e:e,t.clear=!t.filter})),$("#filteringStatus").change((function(e){e.preventDefault(),t.trigger("footable_filter",{filter:$(this).val()})})),$("#filteringSearch").on("input",(function(e){e.preventDefault(),t.trigger("footable_filter",{filter:$(this).val()})}))}(),jQuery.fn.refresh_pwa=function(){window.location.reload()},window.onclick=function(t){$(document).on("click",".close-popover-install-pwa",(function(){$(".popover-install-pwa").css("display","none").fadeOut()})),"btn_refresh"===t.target.id&&($(".spinner-container").css("display","block"),$().refresh_pwa())},doMagic();